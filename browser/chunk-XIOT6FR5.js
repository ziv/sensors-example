import{Ja as C,Ka as P,La as O,Na as y,Oa as w,Ta as i,U as E,Ua as t,V as b,Va as u,Wa as M,Ya as _,Za as p,aa as g,bb as x,cb as m,db as S,eb as o,fb as l,gb as s,na as r,xa as h}from"./chunk-DEVMJMW7.js";function D(d,n){d&1&&(i(0,"div",1)(1,"p"),o(2,"\u26A0\uFE0F Accelerometer is not supported on this device"),t()())}function z(d,n){if(d&1){let e=M();i(0,"div",2)(1,"p"),o(2,"This app needs permission to access device motion."),t(),i(3,"button",4),_("click",function(){E(e);let c=p();return b(c.requestPermission())}),o(4," Grant Permission "),t()()}}function A(d,n){if(d&1&&(i(0,"div",26)(1,"span",27),o(2),t(),i(3,"span",28),o(4),t(),i(5,"span",29),o(6),t()()),d&2){let e=n.$implicit,a=p(2);S(e.type),r(2),l(a.formatTime(e.timestamp)),r(2),l(e.text),r(2),s("",e.force.toFixed(1),"g")}}function F(d,n){if(d&1){let e=M();i(0,"div",3)(1,"div",5)(2,"div",6)(3,"div",7),o(4," \u{1F4F1} "),t()(),i(5,"div",8)(6,"div",9)(7,"label"),o(8,"X"),t(),i(9,"div",10),u(10,"div",11),t(),i(11,"span"),o(12),t()(),i(13,"div",12)(14,"label"),o(15,"Y"),t(),i(16,"div",10),u(17,"div",11),t(),i(18,"span"),o(19),t()(),i(20,"div",13)(21,"label"),o(22,"Z"),t(),i(23,"div",10),u(24,"div",11),t(),i(25,"span"),o(26),t()()()(),i(27,"div",14)(28,"div",15)(29,"label"),o(30,"Total Force:"),t(),i(31,"span",16),o(32),t()(),i(33,"div",17)(34,"label"),o(35,"X-Axis:"),t(),i(36,"span"),o(37),t()(),i(38,"div",17)(39,"label"),o(40,"Y-Axis:"),t(),i(41,"span"),o(42),t()(),i(43,"div",17)(44,"label"),o(45,"Z-Axis:"),t(),i(46,"span"),o(47),t()(),i(48,"div",17)(49,"label"),o(50,"Motion State:"),t(),i(51,"span"),o(52),t()()(),i(53,"div",18)(54,"h3"),o(55,"Motion Activity"),t(),i(56,"div",19),y(57,A,7,5,"div",20,O),t()(),i(59,"div",21)(60,"h3"),o(61,"Understanding Acceleration"),t(),i(62,"div",22)(63,"div",23)(64,"strong"),o(65,"X-Axis:"),t(),o(66," Left/Right movement "),t(),i(67,"div",23)(68,"strong"),o(69,"Y-Axis:"),t(),o(70," Forward/Backward movement "),t(),i(71,"div",23)(72,"strong"),o(73,"Z-Axis:"),t(),o(74," Up/Down movement "),t(),i(75,"div",23)(76,"strong"),o(77,"1g \u2248 9.8 m/s\xB2:"),t(),o(78," Earth's gravity "),t()()(),i(79,"div",24)(80,"button",25),_("click",function(){E(e);let c=p();return b(c.clearHistory())}),o(81," \u{1F9F9} Clear History "),t()()()}if(d&2){let e=p();r(3),x("transform",e.getDeviceTransform()),r(7),x("width",e.Math.abs(e.acceleration().x/e.maxAcceleration*100),"%"),m("positive",e.acceleration().x>0)("negative",e.acceleration().x<0),r(2),l(e.acceleration().x.toFixed(1)),r(5),x("width",e.Math.abs(e.acceleration().y/e.maxAcceleration*100),"%"),m("positive",e.acceleration().y>0)("negative",e.acceleration().y<0),r(2),l(e.acceleration().y.toFixed(1)),r(5),x("width",e.Math.abs(e.acceleration().z/e.maxAcceleration*100),"%"),m("positive",e.acceleration().z>0)("negative",e.acceleration().z<0),r(2),l(e.acceleration().z.toFixed(1)),r(6),s("",e.totalForce().toFixed(2)," m/s\xB2"),r(4),m("active",e.Math.abs(e.acceleration().x)>2),r(),s(" ",e.acceleration().x.toFixed(2)," m/s\xB2 "),r(4),m("active",e.Math.abs(e.acceleration().y)>2),r(),s(" ",e.acceleration().y.toFixed(2)," m/s\xB2 "),r(4),m("active",e.Math.abs(e.acceleration().z)>2),r(),s(" ",e.acceleration().z.toFixed(2)," m/s\xB2 "),r(4),m("active",e.isMoving()),r(),s(" ",e.getMotionState()," "),r(5),w(e.motionEvents().slice(-5))}}var k=class d{supported=g(!1);hasPermission=g(!1);acceleration=g({x:0,y:0,z:0});maxAcceleration=20;motionEvents=g([]);Math=Math;ngOnInit(){this.checkSupport()}ngOnDestroy(){this.stopListening()}checkSupport(){this.supported.set("DeviceMotionEvent"in window),this.supported()&&this.requestPermission()}async requestPermission(){try{let n="granted";typeof DeviceMotionEvent.requestPermission=="function"&&(n=await DeviceMotionEvent.requestPermission()),n==="granted"&&(this.hasPermission.set(!0),this.startListening())}catch(n){console.error("Permission denied:",n)}}startListening(){window.addEventListener("devicemotion",this.handleMotion.bind(this))}stopListening(){window.removeEventListener("devicemotion",this.handleMotion.bind(this))}handleMotion(n){if(n.accelerationIncludingGravity){let e=n.accelerationIncludingGravity,a={x:e.x||0,y:e.y||0,z:e.z||0};this.acceleration.set(a),this.detectMotionEvents(a)}}detectMotionEvents(n){let e=Math.sqrt(n.x*n.x+n.y*n.y+n.z*n.z),a=Date.now(),c="",v="";if(e>15)c="shake",v="Strong shake detected!";else if(e>12)c="sudden",v="Sudden movement";else if(Math.abs(n.x)>8||Math.abs(n.y)>8)c="tilt",v="Device tilted";else return;let f=this.motionEvents();(f.length===0||a-f[f.length-1].timestamp>500)&&this.motionEvents.set([...f,{timestamp:a,text:v,force:e,type:c}])}totalForce(){let n=this.acceleration();return Math.sqrt(n.x*n.x+n.y*n.y+n.z*n.z)}isMoving(){return this.totalForce()>11}getMotionState(){let n=this.totalForce();return n>15?"\u{1F32A}\uFE0F Shaking":n>12?"\u{1F4F3} High Motion":n>11?"\u{1F6B6} Moving":"\u{1F634} Still"}getDeviceTransform(){let n=this.acceleration(),e=Math.max(-30,Math.min(30,n.y*3)),a=Math.max(-30,Math.min(30,-n.x*3)),c=Math.max(-15,Math.min(15,n.z*1.5));return`rotateX(${e}deg) rotateY(${a}deg) rotateZ(${c}deg)`}formatTime(n){return new Date(n).toLocaleTimeString().split(" ")[0]}clearHistory(){this.motionEvents.set([])}static \u0275fac=function(e){return new(e||d)};static \u0275cmp=h({type:d,selectors:[["app-accelerometer"]],decls:6,vars:1,consts:[[1,"accelerometer"],[1,"error"],[1,"permission-request"],[1,"sensor-container"],[1,"permission-btn",3,"click"],[1,"motion-visualization"],[1,"device-representation"],[1,"device-box"],[1,"acceleration-bars"],[1,"axis-bar","x-axis"],[1,"bar-container"],[1,"bar"],[1,"axis-bar","y-axis"],[1,"axis-bar","z-axis"],[1,"readings"],[1,"reading","primary"],[1,"force-value"],[1,"reading"],[1,"motion-history"],[1,"activity-log"],[1,"motion-event",3,"class"],[1,"motion-info"],[1,"info-grid"],[1,"info-item"],[1,"controls"],[1,"clear-btn",3,"click"],[1,"motion-event"],[1,"event-time"],[1,"event-text"],[1,"event-force"]],template:function(e,a){e&1&&(i(0,"div",0)(1,"h1"),o(2,"\u{1F4F3} Accelerometer"),t(),C(3,D,3,0,"div",1)(4,z,5,0,"div",2)(5,F,82,36,"div",3),t()),e&2&&(r(3),P(a.supported()?a.hasPermission()?5:4:3))},styles:[".accelerometer[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem}h1[_ngcontent-%COMP%]{color:#333;margin-bottom:2rem;text-align:center}.error[_ngcontent-%COMP%], .permission-request[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:2rem;border-radius:1rem;margin:2rem 0;text-align:center}.permission-btn[_ngcontent-%COMP%]{background:#007bff;color:#fff;border:none;padding:1rem 2rem;border-radius:.5rem;font-size:1rem;cursor:pointer;margin-top:1rem}.sensor-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.motion-visualization[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;padding:2rem;box-shadow:0 4px 20px #0000001a}.device-representation[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;perspective:1000px}.device-box[_ngcontent-%COMP%]{display:inline-block;font-size:4rem;padding:2rem;border-radius:1rem;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;transition:transform .1s ease-out;transform-style:preserve-3d}.acceleration-bars[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.axis-bar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.axis-bar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;min-width:30px;color:#333}.bar-container[_ngcontent-%COMP%]{flex:1;height:30px;background:#e9ecef;border-radius:15px;position:relative;overflow:hidden}.bar[_ngcontent-%COMP%]{height:100%;border-radius:15px;transition:width .1s ease-out;min-width:2px}.x-axis[_ngcontent-%COMP%]   .bar.positive[_ngcontent-%COMP%]{background:linear-gradient(90deg,#28a745,#34ce57)}.x-axis[_ngcontent-%COMP%]   .bar.negative[_ngcontent-%COMP%]{background:linear-gradient(90deg,#dc3545,#e74c3c)}.y-axis[_ngcontent-%COMP%]   .bar.positive[_ngcontent-%COMP%]{background:linear-gradient(90deg,#007bff,#3498db)}.y-axis[_ngcontent-%COMP%]   .bar.negative[_ngcontent-%COMP%]{background:linear-gradient(90deg,#6f42c1,#9b59b6)}.z-axis[_ngcontent-%COMP%]   .bar.positive[_ngcontent-%COMP%]{background:linear-gradient(90deg,#fd7e14,#f39c12)}.z-axis[_ngcontent-%COMP%]   .bar.negative[_ngcontent-%COMP%]{background:linear-gradient(90deg,#20c997,#1abc9c)}.axis-bar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;min-width:80px;text-align:right;color:#333}.readings[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.reading[_ngcontent-%COMP%]{background:#fff;padding:1rem;border-radius:.5rem;box-shadow:0 2px 10px #0000001a;display:flex;justify-content:space-between;align-items:center}.reading.primary[_ngcontent-%COMP%]{grid-column:1 / -1;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.reading[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.reading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700}.force-value[_ngcontent-%COMP%]{font-size:1.5rem!important}.reading[_ngcontent-%COMP%]   span.active[_ngcontent-%COMP%]{color:#28a745}.reading.primary[_ngcontent-%COMP%]   span.active[_ngcontent-%COMP%]{color:#fff;text-shadow:0 0 10px rgba(255,255,255,.5)}.motion-history[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;padding:2rem;box-shadow:0 4px 20px #0000001a}.motion-history[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin-bottom:1rem}.activity-log[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;max-height:200px;overflow-y:auto}.motion-event[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.7rem;border-radius:.5rem;background:#f8f9fa;border-left:4px solid #dee2e6}.motion-event.shake[_ngcontent-%COMP%]{border-left-color:#dc3545;background:#fff5f5}.motion-event.tilt[_ngcontent-%COMP%]{border-left-color:#007bff;background:#f8f9ff}.motion-event.sudden[_ngcontent-%COMP%]{border-left-color:#ffc107;background:#fffbf0}.event-time[_ngcontent-%COMP%]{font-size:.8rem;color:#666;min-width:60px}.event-text[_ngcontent-%COMP%]{flex:1;margin:0 1rem}.event-force[_ngcontent-%COMP%]{font-weight:700;color:#333;min-width:50px;text-align:right}.motion-info[_ngcontent-%COMP%]{background:#e3f2fd;border-radius:1rem;padding:2rem}.motion-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin-bottom:1rem}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.info-item[_ngcontent-%COMP%]{background:#fff;padding:1rem;border-radius:.5rem;color:#333}.controls[_ngcontent-%COMP%]{text-align:center}.clear-btn[_ngcontent-%COMP%]{background:#6c757d;color:#fff;border:none;padding:1rem 2rem;border-radius:.5rem;font-size:1rem;cursor:pointer}.clear-btn[_ngcontent-%COMP%]:hover{background:#545b62}@media (max-width: 768px){.accelerometer[_ngcontent-%COMP%]{padding:1rem}.readings[_ngcontent-%COMP%], .info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.device-box[_ngcontent-%COMP%]{font-size:3rem;padding:1.5rem}.axis-bar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:.5rem}.axis-bar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{min-width:auto}.axis-bar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;min-width:auto}}"]})};export{k as AccelerometerComponent};
