import{Ja as v,Ka as x,Ta as i,U as p,Ua as n,V as b,Va as _,Wa as g,Ya as u,Za as d,aa as l,cb as C,db as c,fb as o,gb as O,hb as h,na as a,xa as f}from"./chunk-VBRRCYMP.js";function E(r,t){r&1&&(i(0,"div",1)(1,"p"),o(2,"\u26A0\uFE0F Device orientation is not supported on this device"),n()())}function M(r,t){if(r&1){let e=g();i(0,"div",2)(1,"p"),o(2,"This app needs permission to access device orientation."),n(),i(3,"button",4),u("click",function(){p(e);let m=d();return b(m.requestPermission())}),o(4," Grant Permission "),n()()}}function w(r,t){if(r&1){let e=g();i(0,"div",3)(1,"div",5),_(2,"div",6)(3,"div",7)(4,"div",8),n(),i(5,"div",9)(6,"div",10)(7,"label"),o(8,"Tilt X (Roll):"),n(),i(9,"span"),o(10),n()(),i(11,"div",10)(12,"label"),o(13,"Tilt Y (Pitch):"),n(),i(14,"span"),o(15),n()(),i(16,"div",10)(17,"label"),o(18,"Status:"),n(),i(19,"span"),o(20),n()()(),i(21,"div",11)(22,"button",12),u("click",function(){p(e);let m=d();return b(m.calibrate())}),o(23," \u{1F3AF} Calibrate "),n(),i(24,"small"),o(25,"Place device on flat surface and calibrate for accuracy"),n()()()}if(r&2){let e=d();a(2),C("transform","translate("+e.bubbleX()+"px, "+e.bubbleY()+"px)"),a(7),c("level",e.Math.abs(e.roll())<2),a(),h("",e.roll().toFixed(1),"\xB0"),a(4),c("level",e.Math.abs(e.pitch())<2),a(),h("",e.pitch().toFixed(1),"\xB0"),a(4),c("level",e.isLevel()),a(),O(e.isLevel()?"\u2705 Level":"\u274C Not Level")}}var P=class r{supported=l(!1);hasPermission=l(!1);pitch=l(0);roll=l(0);Math=Math;calibrationOffset={pitch:0,roll:0};bubbleX=l(0);bubbleY=l(0);ngOnInit(){this.checkSupport()}ngOnDestroy(){this.stopListening()}checkSupport(){this.supported.set("DeviceOrientationEvent"in window&&typeof DeviceOrientationEvent.requestPermission=="function"||"ondeviceorientation"in window),this.supported()&&this.requestPermission()}async requestPermission(){try{let t="granted";typeof DeviceOrientationEvent.requestPermission=="function"&&(t=await DeviceOrientationEvent.requestPermission()),t==="granted"&&(this.hasPermission.set(!0),this.startListening())}catch(t){console.error("Permission denied:",t)}}startListening(){window.addEventListener("deviceorientation",this.handleOrientation.bind(this))}stopListening(){window.removeEventListener("deviceorientation",this.handleOrientation.bind(this))}handleOrientation(t){if(t.beta!==null&&t.gamma!==null){let e=t.beta-this.calibrationOffset.pitch,s=t.gamma-this.calibrationOffset.roll;this.pitch.set(Math.max(-90,Math.min(90,e))),this.roll.set(Math.max(-90,Math.min(90,s))),this.updateBubblePosition()}}updateBubblePosition(){let e=this.pitch()/90*120,s=this.roll()/90*120;this.bubbleX.set(s),this.bubbleY.set(e)}isLevel(){return Math.abs(this.pitch())<2&&Math.abs(this.roll())<2}calibrate(){this.calibrationOffset.pitch=this.pitch()+this.calibrationOffset.pitch,this.calibrationOffset.roll=this.roll()+this.calibrationOffset.roll,this.pitch.set(0),this.roll.set(0),this.updateBubblePosition()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=f({type:r,selectors:[["app-leveler"]],decls:6,vars:1,consts:[[1,"leveler"],[1,"error"],[1,"permission-request"],[1,"level-container"],[1,"permission-btn",3,"click"],[1,"bubble-level"],[1,"bubble"],[1,"crosshair-h"],[1,"crosshair-v"],[1,"readings"],[1,"reading"],[1,"calibration"],[1,"calibrate-btn",3,"click"]],template:function(e,s){e&1&&(i(0,"div",0)(1,"h1"),o(2,"\u{1F4D0} Digital Leveler"),n(),v(3,E,3,0,"div",1)(4,M,5,0,"div",2)(5,w,26,11,"div",3),n()),e&2&&(a(3),x(s.supported()?s.hasPermission()?5:4:3))},styles:[".leveler[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:2rem;text-align:center}h1[_ngcontent-%COMP%]{color:#333;margin-bottom:2rem}.error[_ngcontent-%COMP%], .permission-request[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:2rem;border-radius:1rem;margin:2rem 0}.permission-btn[_ngcontent-%COMP%]{background:#007bff;color:#fff;border:none;padding:1rem 2rem;border-radius:.5rem;font-size:1rem;cursor:pointer;margin-top:1rem}.permission-btn[_ngcontent-%COMP%]:hover{background:#0056b3}.level-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.bubble-level[_ngcontent-%COMP%]{position:relative;width:300px;height:300px;background:linear-gradient(135deg,#e3f2fd,#bbdefb);border-radius:50%;border:8px solid #333;margin:0 auto;overflow:hidden}.bubble[_ngcontent-%COMP%]{position:absolute;width:40px;height:40px;background:radial-gradient(circle,#4caf50,#388e3c 70%);border-radius:50%;top:50%;left:50%;transform:translate(-50%,-50%);transition:transform .1s ease-out;box-shadow:0 2px 10px #0000004d;border:3px solid #2e7d32}.crosshair-h[_ngcontent-%COMP%], .crosshair-v[_ngcontent-%COMP%]{position:absolute;background:#0000004d}.crosshair-h[_ngcontent-%COMP%]{width:100%;height:2px;top:50%;left:0;transform:translateY(-50%)}.crosshair-v[_ngcontent-%COMP%]{width:2px;height:100%;left:50%;top:0;transform:translate(-50%)}.readings[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;margin:2rem 0}.reading[_ngcontent-%COMP%]{background:#fff;padding:1rem;border-radius:.5rem;box-shadow:0 2px 10px #0000001a;display:flex;justify-content:space-between;align-items:center}.reading[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#333}.reading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;color:#dc3545}.reading[_ngcontent-%COMP%]   span.level[_ngcontent-%COMP%]{color:#28a745}.calibration[_ngcontent-%COMP%]{text-align:center}.calibrate-btn[_ngcontent-%COMP%]{background:#17a2b8;color:#fff;border:none;padding:1rem 2rem;border-radius:.5rem;font-size:1rem;cursor:pointer;margin-bottom:.5rem}.calibrate-btn[_ngcontent-%COMP%]:hover{background:#138496}.calibration[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;color:#666;margin-top:.5rem}@media (max-width: 768px){.leveler[_ngcontent-%COMP%]{padding:1rem}.bubble-level[_ngcontent-%COMP%]{width:250px;height:250px}.readings[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{P as LevelerComponent};
