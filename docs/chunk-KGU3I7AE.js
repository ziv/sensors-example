import{Ja as u,Ka as f,Ma as O,Na as P,Oa as M,Ta as i,U as p,Ua as n,V as g,Va as m,Wa as h,Ya as C,Za as c,aa as d,cb as E,db as _,fb as o,gb as b,hb as x,na as r,xa as v}from"./chunk-VBRRCYMP.js";function y(a,t){a&1&&(i(0,"div",1)(1,"p"),o(2,"\u26A0\uFE0F Device orientation is not supported on this device"),n()())}function k(a,t){if(a&1){let e=h();i(0,"div",2)(1,"p"),o(2,"This app needs permission to access device orientation."),n(),i(3,"button",4),C("click",function(){p(e);let l=c();return g(l.requestPermission())}),o(4," Grant Permission "),n()()}}function S(a,t){if(a&1&&(i(0,"div",24),o(1),n()),a&2){let e=c().$implicit;r(),b(e)}}function D(a,t){if(a&1&&(i(0,"div",22),m(1,"div",23),u(2,S,2,1,"div",24),n()),a&2){let e=t.$implicit;E("transform","rotate("+e+"deg)"),r(),_("major",e%30===0),r(),f(e%30===0&&e!==0&&e!==90&&e!==180&&e!==270?2:-1)}}function N(a,t){if(a&1){let e=h();i(0,"div",3)(1,"div",5)(2,"div",6)(3,"div",7),o(4,"N"),n(),i(5,"div",8),o(6,"E"),n(),i(7,"div",9),o(8,"S"),n(),i(9,"div",10),o(10,"W"),n(),P(11,D,3,5,"div",11,O),n(),i(13,"div",12),m(14,"div",13)(15,"div",14),n(),m(16,"div",15),n(),i(17,"div",16)(18,"div",17)(19,"label"),o(20,"Heading:"),n(),i(21,"span",18),o(22),n()(),i(23,"div",19)(24,"label"),o(25,"Direction:"),n(),i(26,"span"),o(27),n()(),i(28,"div",19)(29,"label"),o(30,"Accuracy:"),n(),i(31,"span"),o(32),n()()(),i(33,"div",20)(34,"button",21),C("click",function(){p(e);let l=c();return g(l.calibrate())}),o(35," \u{1F3AF} Calibrate "),n(),i(36,"small"),o(37,"Move device in figure-8 pattern to calibrate"),n()()()}if(a&2){let e=c();r(2),E("transform","rotate("+-e.heading()+"deg)"),r(9),M(e.degreeMarkers),r(11),x("",e.heading().toFixed(1),"\xB0"),r(5),b(e.getDirection()),r(4),_("accurate",e.accuracy()!==null&&e.accuracy()>-1),r(),x(" ",e.accuracy()!==null?e.accuracy()>-1?"High":"Low":"Unknown"," ")}}var w=class a{supported=d(!1);hasPermission=d(!1);heading=d(0);accuracy=d(null);degreeMarkers=Array.from({length:72},(t,e)=>e*5);calibrationOffset=0;ngOnInit(){this.checkSupport()}ngOnDestroy(){this.stopListening()}checkSupport(){this.supported.set("DeviceOrientationEvent"in window&&typeof DeviceOrientationEvent.requestPermission=="function"||"ondeviceorientationabsolute"in window||"ondeviceorientation"in window),this.supported()&&this.requestPermission()}async requestPermission(){try{let t="granted";typeof DeviceOrientationEvent.requestPermission=="function"&&(t=await DeviceOrientationEvent.requestPermission()),t==="granted"&&(this.hasPermission.set(!0),this.startListening())}catch(t){console.error("Permission denied:",t)}}startListening(){let t=e=>this.handleOrientation(e);"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",t):window.addEventListener("deviceorientation",t)}stopListening(){}handleOrientation(t){if(t.alpha!==null){let e=t.alpha;t.webkitCompassHeading&&(e=t.webkitCompassHeading);let s=(360-(e-this.calibrationOffset))%360;this.heading.set(s),t.webkitCompassAccuracy!==void 0&&this.accuracy.set(t.webkitCompassAccuracy)}}getDirection(){let t=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"],e=Math.round(this.heading()/22.5)%16;return t[e]}calibrate(){this.calibrationOffset=this.heading(),this.heading.set(0)}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=v({type:a,selectors:[["app-compass"]],decls:6,vars:1,consts:[[1,"compass"],[1,"error"],[1,"permission-request"],[1,"compass-container"],[1,"permission-btn",3,"click"],[1,"compass-face"],[1,"compass-dial"],[1,"cardinal","north"],[1,"cardinal","east"],[1,"cardinal","south"],[1,"cardinal","west"],[1,"degree-marker",3,"transform"],[1,"compass-needle"],[1,"needle-north"],[1,"needle-south"],[1,"center-dot"],[1,"readings"],[1,"reading","primary"],[1,"heading-value"],[1,"reading"],[1,"calibration"],[1,"calibrate-btn",3,"click"],[1,"degree-marker"],[1,"marker-line"],[1,"degree-label"]],template:function(e,s){e&1&&(i(0,"div",0)(1,"h1"),o(2,"\u{1F9ED} Digital Compass"),n(),u(3,y,3,0,"div",1)(4,k,5,0,"div",2)(5,N,38,7,"div",3),n()),e&2&&(r(3),f(s.supported()?s.hasPermission()?5:4:3))},styles:[".compass[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:2rem;text-align:center}h1[_ngcontent-%COMP%]{color:#333;margin-bottom:2rem}.error[_ngcontent-%COMP%], .permission-request[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:2rem;border-radius:1rem;margin:2rem 0}.permission-btn[_ngcontent-%COMP%]{background:#007bff;color:#fff;border:none;padding:1rem 2rem;border-radius:.5rem;font-size:1rem;cursor:pointer;margin-top:1rem}.compass-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.compass-face[_ngcontent-%COMP%]{position:relative;width:300px;height:300px;margin:0 auto;background:radial-gradient(circle,#f0f8ff,#e1f5fe);border-radius:50%;border:8px solid #333;box-shadow:0 4px 20px #0000004d}.compass-dial[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;border-radius:50%;transition:transform .3s ease-out}.cardinal[_ngcontent-%COMP%]{position:absolute;font-size:2rem;font-weight:700;color:#333;transform:translate(-50%,-50%)}.cardinal.north[_ngcontent-%COMP%]{top:15px;left:50%;color:#dc3545;font-size:2.5rem}.cardinal.east[_ngcontent-%COMP%]{top:50%;right:15px;transform:translate(50%,-50%)}.cardinal.south[_ngcontent-%COMP%]{bottom:15px;left:50%;transform:translate(-50%,50%)}.cardinal.west[_ngcontent-%COMP%]{top:50%;left:15px;transform:translate(-50%,-50%)}.degree-marker[_ngcontent-%COMP%]{position:absolute;width:2px;height:20px;top:0;left:50%;transform-origin:50% 150px}.marker-line[_ngcontent-%COMP%]{width:100%;height:10px;background:#666}.marker-line.major[_ngcontent-%COMP%]{height:15px;background:#333;width:3px}.degree-label[_ngcontent-%COMP%]{position:absolute;top:20px;left:50%;transform:translate(-50%);font-size:.8rem;color:#333;font-weight:700}.compass-needle[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:6px;height:120px;z-index:10}.needle-north[_ngcontent-%COMP%]{width:100%;height:50%;background:linear-gradient(to top,#dc3545,#ff6b7a);clip-path:polygon(50% 0%,0% 100%,100% 100%)}.needle-south[_ngcontent-%COMP%]{width:100%;height:50%;background:linear-gradient(to bottom,#333,#666);clip-path:polygon(0% 0%,100% 0%,50% 100%)}.center-dot[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:12px;height:12px;background:#333;border-radius:50%;z-index:20}.readings[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:1rem;margin:2rem 0}.reading[_ngcontent-%COMP%]{background:#fff;padding:1rem;border-radius:.5rem;box-shadow:0 2px 10px #0000001a;display:flex;justify-content:space-between;align-items:center}.reading.primary[_ngcontent-%COMP%]{grid-column:1 / -1}.reading[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#333}.reading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;color:#333}.heading-value[_ngcontent-%COMP%]{font-size:1.8rem!important;color:#dc3545!important}.accurate[_ngcontent-%COMP%]{color:#28a745!important}.calibration[_ngcontent-%COMP%]{text-align:center}.calibrate-btn[_ngcontent-%COMP%]{background:#17a2b8;color:#fff;border:none;padding:1rem 2rem;border-radius:.5rem;font-size:1rem;cursor:pointer}.calibrate-btn[_ngcontent-%COMP%]:hover{background:#138496}.calibration[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;color:#666;margin-top:.5rem}@media (max-width: 768px){.compass[_ngcontent-%COMP%]{padding:1rem}.compass-face[_ngcontent-%COMP%]{width:250px;height:250px}.compass-needle[_ngcontent-%COMP%]{height:100px}.degree-marker[_ngcontent-%COMP%]{transform-origin:50% 125px}.readings[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{w as CompassComponent};
