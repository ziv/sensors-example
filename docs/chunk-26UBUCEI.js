import{g as D}from"./chunk-3WETVJHI.js";import{Ja as l,Ka as p,La as M,Ma as O,Na as E,Oa as C,Ta as i,U as x,Ua as t,V as f,Va as y,Wa as P,Ya as _,Za as d,aa as c,cb as b,db as g,eb as w,fb as n,gb as v,hb as u,jb as S,na as a,xa as h}from"./chunk-VBRRCYMP.js";var T=()=>[1,2,3];function N(r,o){r&1&&(i(0,"div",1)(1,"p"),n(2,"\u26A0\uFE0F Proximity sensor is not supported on this device"),t(),i(3,"small"),n(4,"This sensor requires specific hardware and is mainly found on mobile devices"),t()())}function F(r,o){if(r&1){let e=P();i(0,"div",2)(1,"p"),n(2,"This app needs permission to access the proximity sensor."),t(),i(3,"button",4),_("click",function(){x(e);let m=d();return f(m.requestPermission())}),n(4," Grant Permission "),t()()}}function I(r,o){if(r&1&&y(0,"div",33),r&2){let e=o.$implicit,s=d(2);b("animation-delay",e*.3+"s"),g("active",s.isNear())}}function j(r,o){r&1&&(i(0,"span",34),n(1,"\u270B"),t(),i(2,"span",35),n(3,"Object Detected"),t())}function A(r,o){r&1&&(i(0,"span",34),n(1,"\u{1F441}\uFE0F"),t(),i(2,"span",35),n(3,"Clear"),t())}function z(r,o){if(r&1&&(i(0,"span",36),n(1),t(),i(2,"span",37),n(3,"cm"),t()),r&2){let e=d(2);a(),v(e.distance().toFixed(1))}}function q(r,o){r&1&&(i(0,"span",17),n(1,"Unknown"),t())}function V(r,o){if(r&1&&n(0),r&2){let e=d(2);u(" ",e.distance().toFixed(1)," cm ")}}function L(r,o){r&1&&n(0," Unknown ")}function U(r,o){if(r&1&&n(0),r&2){let e=d().$implicit;u(" ",e.distance.toFixed(1),"cm ")}}function B(r,o){r&1&&n(0," N/A ")}function $(r,o){if(r&1&&(i(0,"div",38)(1,"div",39),n(2),t(),i(3,"div",40),n(4),t(),i(5,"div",41),l(6,U,1,1)(7,B,1,0),t()()),r&2){let e=o.$implicit,s=d(2);w(e.type),a(2),v(s.formatTime(e.timestamp)),a(2),v(e.description),a(2),p(e.distance!==null?6:7)}}function R(r,o){r&1&&(i(0,"div",24),n(1," No proximity events detected yet. Move objects near the sensor. "),t())}function G(r,o){if(r&1){let e=P();i(0,"div",3)(1,"div",5)(2,"div",6)(3,"div",7),n(4," \u{1F4F1} "),i(5,"div",8),E(6,I,1,4,"div",9,O),t()(),i(8,"div",10),l(9,j,4,0)(10,A,4,0),t()(),i(11,"div",11)(12,"div",12),n(13,"Distance"),t(),i(14,"div",13)(15,"div",14),y(16,"div",15),t(),i(17,"div",16),l(18,z,4,1)(19,q,2,0,"span",17),t()()()(),i(20,"div",18)(21,"div",19)(22,"label"),n(23,"Proximity State:"),t(),i(24,"span"),n(25),t()(),i(26,"div",20)(27,"label"),n(28,"Distance:"),t(),i(29,"span"),l(30,V,1,1)(31,L,1,0),t()(),i(32,"div",20)(33,"label"),n(34,"Max Range:"),t(),i(35,"span"),n(36),t()(),i(37,"div",20)(38,"label"),n(39,"Sensor Status:"),t(),i(40,"span"),n(41),t()()(),i(42,"div",21)(43,"h3"),n(44,"Proximity Events"),t(),i(45,"div",22),E(46,$,8,5,"div",23,M),l(48,R,2,0,"div",24),t()(),i(49,"div",25)(50,"h3"),n(51,"About Proximity Sensors"),t(),i(52,"div",26)(53,"p"),n(54,"Proximity sensors detect nearby objects without physical contact. They are commonly used in smartphones to:"),t(),i(55,"ul")(56,"li"),n(57,"\u{1F4DE} Turn off screen during phone calls"),t(),i(58,"li"),n(59,"\u{1F4A1} Adjust brightness automatically"),t(),i(60,"li"),n(61,"\u{1F50B} Save battery by disabling touch when covered"),t(),i(62,"li"),n(63,"\u{1F4F1} Prevent accidental touches in pocket"),t()(),i(64,"div",27)(65,"h4"),n(66,"Common Types:"),t(),i(67,"div",28)(68,"div",29)(69,"strong"),n(70,"Infrared:"),t(),n(71," Uses IR light reflection "),t(),i(72,"div",29)(73,"strong"),n(74,"Ultrasonic:"),t(),n(75," Uses sound waves "),t(),i(76,"div",29)(77,"strong"),n(78,"Capacitive:"),t(),n(79," Detects electrical fields "),t(),i(80,"div",29)(81,"strong"),n(82,"Magnetic:"),t(),n(83," Uses magnetic field changes "),t()()()()(),i(84,"div",30)(85,"button",31),_("click",function(){x(e);let m=d();return f(m.clearEvents())}),n(86," \u{1F9F9} Clear Events "),t(),i(87,"button",32),_("click",function(){x(e);let m=d();return f(m.testSensor())}),n(88," \u{1F9EA} Test Sensor "),t()()()}if(r&2){let e=d();a(2),g("near",e.isNear()),a(4),C(S(19,T)),a(2),g("detected",e.isNear()),a(),p(e.isNear()?9:10),a(7),b("width",e.getDistancePercentage(),"%"),g("near",e.isNear()),a(2),p(e.distance()!==null?18:19),a(6),g("near",e.isNear()),a(),u(" ",e.isNear()?"\u{1F534} Near":"\u{1F7E2} Far"," "),a(5),p(e.distance()!==null?30:31),a(6),u("",e.maxDistance()," cm"),a(4),g("active",e.isActive()),a(),u(" ",e.isActive()?"\u2705 Active":"\u23F8\uFE0F Inactive"," "),a(5),C(e.proximityEvents().slice(-5)),a(2),p(e.proximityEvents().length===0?48:-1)}}var k=class r{supported=c(!1);hasPermission=c(!1);isNear=c(!1);distance=c(null);maxDistance=c(5);isActive=c(!1);proximityEvents=c([]);sensor=null;ngOnInit(){this.checkSupport()}ngOnDestroy(){this.stopSensor()}checkSupport(){"ProximitySensor"in window?(this.supported.set(!0),this.requestPermission()):"onuserproximity"in window?(this.supported.set(!0),this.requestPermission()):this.simulateProximitySensor()}async requestPermission(){try{let o=await navigator.permissions.query({name:"proximity"});(o.state==="granted"||o.state==="prompt")&&(this.hasPermission.set(!0),this.startSensor())}catch(o){console.error("Permission error:",o),this.simulateProximitySensor()}}startSensor(){try{"ProximitySensor"in window?(this.sensor=new window.ProximitySensor({frequency:10}),this.sensor.addEventListener("reading",()=>{let o=this.sensor.distance,e=this.sensor.near;this.updateProximity(e,o)}),this.sensor.start(),this.isActive.set(!0)):"onuserproximity"in window&&(window.addEventListener("userproximity",o=>{this.updateProximity(o.near,null)}),this.isActive.set(!0))}catch(o){console.error("Failed to start proximity sensor:",o),this.simulateProximitySensor()}}stopSensor(){this.sensor&&(this.sensor.stop(),this.sensor=null),window.removeEventListener("userproximity",this.handleProximityEvent),this.isActive.set(!1)}handleProximityEvent=o=>{this.updateProximity(o.near,null)};simulateProximitySensor(){this.supported.set(!0),this.hasPermission.set(!0),this.isActive.set(!0);let o=!1,e=Date.now();setInterval(()=>{let s=Date.now();if(s-e>5e3+Math.random()*1e4){o=!o,e=s;let m=o?Math.random()*3:3+Math.random()*7;this.updateProximity(o,m)}},1e3)}updateProximity(o,e){let s=this.isNear();if(this.isNear.set(o),this.distance.set(e),s!==o){let m=this.proximityEvents();this.proximityEvents.set([...m,{timestamp:Date.now(),type:o?"near":"far",description:o?"Object detected nearby":"Object moved away",distance:e}].slice(-20))}}getDistancePercentage(){if(this.distance()===null)return this.isNear()?100:0;let o=this.distance(),e=this.maxDistance();return Math.min(100,(e-o)/e*100)}formatTime(o){return new Date(o).toLocaleTimeString()}clearEvents(){this.proximityEvents.set([])}testSensor(){[{near:!1,distance:8,delay:0},{near:!0,distance:2,delay:1e3},{near:!1,distance:6,delay:2e3},{near:!0,distance:1,delay:3e3},{near:!1,distance:10,delay:4e3}].forEach(e=>{setTimeout(()=>{this.updateProximity(e.near,e.distance)},e.delay)})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=h({type:r,selectors:[["app-proximity"]],decls:6,vars:1,consts:[[1,"proximity"],[1,"error"],[1,"permission-request"],[1,"sensor-container"],[1,"permission-btn",3,"click"],[1,"proximity-display"],[1,"sensor-visualization"],[1,"device-screen"],[1,"proximity-waves"],[1,"wave",3,"animation-delay","active"],[1,"object-indicator"],[1,"distance-meter"],[1,"meter-label"],[1,"meter-display"],[1,"meter-bar"],[1,"meter-fill"],[1,"meter-value"],[1,"distance-unknown"],[1,"readings"],[1,"reading","primary"],[1,"reading"],[1,"proximity-events"],[1,"events-list"],[1,"proximity-event",3,"class"],[1,"no-events"],[1,"sensor-info"],[1,"info-content"],[1,"sensor-types"],[1,"type-grid"],[1,"type-item"],[1,"controls"],[1,"clear-btn",3,"click"],[1,"test-btn",3,"click"],[1,"wave"],[1,"object-icon"],[1,"object-text"],[1,"distance-number"],[1,"distance-unit"],[1,"proximity-event"],[1,"event-time"],[1,"event-description"],[1,"event-distance"]],template:function(e,s){e&1&&(i(0,"div",0)(1,"h1"),n(2,"\u{1F4CF} Proximity Sensor"),t(),l(3,N,5,0,"div",1)(4,F,5,0,"div",2)(5,G,89,20,"div",3),t()),e&2&&(a(3),p(s.supported()?s.hasPermission()?5:4:3))},dependencies:[D],styles:[".proximity[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem}h1[_ngcontent-%COMP%]{color:#333;margin-bottom:2rem;text-align:center}.error[_ngcontent-%COMP%], .permission-request[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:2rem;border-radius:1rem;margin:2rem 0;text-align:center}.permission-btn[_ngcontent-%COMP%]{background:#007bff;color:#fff;border:none;padding:1rem 2rem;border-radius:.5rem;font-size:1rem;cursor:pointer;margin-top:1rem}.sensor-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.proximity-display[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;padding:2rem;box-shadow:0 4px 20px #0000001a}.sensor-visualization[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding:2rem;background:linear-gradient(135deg,#f8f9fa,#e9ecef);border-radius:1rem;transition:background-color .3s ease}.sensor-visualization.near[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fee2e2,#fecaca)}.device-screen[_ngcontent-%COMP%]{position:relative;font-size:4rem;color:#333;display:flex;align-items:center;justify-content:center}.proximity-waves[_ngcontent-%COMP%]{position:absolute;inset:-20px}.wave[_ngcontent-%COMP%]{position:absolute;border:2px solid transparent;border-radius:50%;animation:_ngcontent-%COMP%_pulse 2s infinite;opacity:0}.wave.active[_ngcontent-%COMP%]{border-color:#dc3545;opacity:1}.wave[_ngcontent-%COMP%]:nth-child(1){inset:10px}.wave[_ngcontent-%COMP%]:nth-child(2){inset:0}.wave[_ngcontent-%COMP%]:nth-child(3){inset:-10px}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1);opacity:1}to{transform:scale(1.3);opacity:0}}.object-indicator[_ngcontent-%COMP%]{text-align:center;padding:1rem;border-radius:1rem;background:#fff;box-shadow:0 2px 10px #0000001a;transition:all .3s ease}.object-indicator.detected[_ngcontent-%COMP%]{background:#dc3545;color:#fff;transform:scale(1.05)}.object-icon[_ngcontent-%COMP%]{display:block;font-size:2rem;margin-bottom:.5rem}.object-text[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem}.distance-meter[_ngcontent-%COMP%]{margin-top:2rem}.meter-label[_ngcontent-%COMP%]{font-weight:700;color:#333;margin-bottom:1rem;text-align:center}.meter-display[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.meter-bar[_ngcontent-%COMP%]{flex:1;height:30px;background:#e9ecef;border-radius:15px;overflow:hidden;position:relative}.meter-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#28a745,#ffc107,#dc3545);border-radius:15px;transition:width .3s ease,background-color .3s ease}.meter-fill.near[_ngcontent-%COMP%]{background:linear-gradient(90deg,#dc3545,#c82333)}.meter-value[_ngcontent-%COMP%]{min-width:100px;text-align:center}.distance-number[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#333}.distance-unit[_ngcontent-%COMP%]{font-size:1rem;color:#666}.distance-unknown[_ngcontent-%COMP%]{font-size:1.2rem;color:#666;font-style:italic}.readings[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.reading[_ngcontent-%COMP%]{background:#fff;padding:1rem;border-radius:.5rem;box-shadow:0 2px 10px #0000001a;display:flex;justify-content:space-between;align-items:center}.reading.primary[_ngcontent-%COMP%]{grid-column:1 / -1;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.reading[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.reading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700}.reading[_ngcontent-%COMP%]   span.near[_ngcontent-%COMP%]{color:#dc3545}.reading.primary[_ngcontent-%COMP%]   span.near[_ngcontent-%COMP%]{color:#fff;text-shadow:0 0 10px rgba(255,255,255,.5)}.reading[_ngcontent-%COMP%]   span.active[_ngcontent-%COMP%]{color:#28a745}.proximity-events[_ngcontent-%COMP%], .sensor-info[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;padding:2rem;box-shadow:0 4px 20px #0000001a}.proximity-events[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .sensor-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin-bottom:1rem}.events-list[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}.proximity-event[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr auto;gap:1rem;padding:1rem;border-radius:.5rem;margin-bottom:.5rem;background:#f8f9fa;border-left:4px solid #dee2e6}.proximity-event.near[_ngcontent-%COMP%]{border-left-color:#dc3545;background:#fff5f5}.proximity-event.far[_ngcontent-%COMP%]{border-left-color:#28a745;background:#f0fff4}.event-time[_ngcontent-%COMP%]{font-size:.8rem;color:#666;white-space:nowrap}.event-description[_ngcontent-%COMP%]{color:#333}.event-distance[_ngcontent-%COMP%]{font-weight:700;color:#333;white-space:nowrap}.no-events[_ngcontent-%COMP%]{text-align:center;color:#666;font-style:italic;padding:2rem}.sensor-info[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:1rem 0;padding-left:1.5rem}.sensor-info[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.5rem;color:#666}.sensor-types[_ngcontent-%COMP%]{margin-top:2rem}.sensor-types[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#333;margin-bottom:1rem}.type-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.type-item[_ngcontent-%COMP%]{background:#f8f9fa;padding:1rem;border-radius:.5rem;color:#333}.controls[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem}.clear-btn[_ngcontent-%COMP%], .test-btn[_ngcontent-%COMP%]{padding:1rem 2rem;border-radius:.5rem;font-size:1rem;cursor:pointer;border:none}.clear-btn[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.clear-btn[_ngcontent-%COMP%]:hover{background:#545b62}.test-btn[_ngcontent-%COMP%]{background:#28a745;color:#fff}.test-btn[_ngcontent-%COMP%]:hover{background:#1e7e34}@media (max-width: 768px){.proximity[_ngcontent-%COMP%]{padding:1rem}.sensor-visualization[_ngcontent-%COMP%]{flex-direction:column;gap:2rem}.device-screen[_ngcontent-%COMP%]{font-size:3rem}.readings[_ngcontent-%COMP%], .type-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.controls[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.proximity-event[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.5rem;text-align:center}.meter-display[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}}"]})};export{k as ProximityComponent};
