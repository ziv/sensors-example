import{$a as V,Ja as F,Ka as I,La as H,Na as R,Oa as L,Ta as i,U as P,Ua as n,V as O,Va as p,Wa as w,Ya as S,Za as u,aa as v,ab as q,bb as W,cb as b,db as M,eb as N,fb as o,gb as h,hb as G,na as m,xa as T}from"./chunk-VBRRCYMP.js";var $=["graphCanvas"];function j(l,t){l&1&&(i(0,"div",2)(1,"p"),o(2,"\u26A0\uFE0F Accelerometer is not supported on this device"),n()())}function U(l,t){if(l&1){let e=w();i(0,"div",3)(1,"p"),o(2,"This app needs permission to access device motion."),n(),i(3,"button",5),S("click",function(){P(e);let d=u();return O(d.requestPermission())}),o(4," Grant Permission "),n()()}}function J(l,t){if(l&1&&(i(0,"div",30)(1,"span",31),o(2),n(),i(3,"span",32),o(4),n(),i(5,"span",33),o(6),n()()),l&2){let e=t.$implicit,a=u(2);N(e.type),m(2),h(a.formatTime(e.timestamp)),m(2),h(e.text),m(2),G("",e.force.toFixed(1),"g")}}function K(l,t){if(l&1){let e=w();i(0,"div",4)(1,"div",6)(2,"div",7)(3,"div",8),o(4," \u{1F4F1} "),n()(),i(5,"div",9)(6,"div",10)(7,"label"),o(8,"X"),n(),i(9,"div",11),p(10,"div",12),n(),i(11,"span"),o(12),n()(),i(13,"div",13)(14,"label"),o(15,"Y"),n(),i(16,"div",11),p(17,"div",12),n(),i(18,"span"),o(19),n()(),i(20,"div",14)(21,"label"),o(22,"Z"),n(),i(23,"div",11),p(24,"div",12),n(),i(25,"span"),o(26),n()()()(),i(27,"div",15)(28,"h3"),o(29,"Real-time Data (60 second window)"),n(),p(30,"canvas",null,0),i(32,"div",16)(33,"div",17),p(34,"span",18),i(35,"span"),o(36,"Total Force"),n()(),i(37,"div",17),p(38,"span",19),i(39,"span"),o(40,"X-Axis"),n()(),i(41,"div",17),p(42,"span",20),i(43,"span"),o(44,"Y-Axis"),n()(),i(45,"div",17),p(46,"span",21),i(47,"span"),o(48,"Z-Axis"),n()()()(),i(49,"div",22)(50,"h3"),o(51,"Motion Activity"),n(),i(52,"div",23),R(53,J,7,5,"div",24,H),n()(),i(55,"div",25)(56,"h3"),o(57,"Understanding Acceleration"),n(),i(58,"div",26)(59,"div",27)(60,"strong"),o(61,"X-Axis:"),n(),o(62," Left/Right movement "),n(),i(63,"div",27)(64,"strong"),o(65,"Y-Axis:"),n(),o(66," Forward/Backward movement "),n(),i(67,"div",27)(68,"strong"),o(69,"Z-Axis:"),n(),o(70," Up/Down movement "),n(),i(71,"div",27)(72,"strong"),o(73,"1g \u2248 9.8 m/s\xB2:"),n(),o(74," Earth's gravity "),n()()(),i(75,"div",28)(76,"button",29),S("click",function(){P(e);let d=u();return O(d.clearHistory())}),o(77," \u{1F9F9} Clear History "),n()()()}if(l&2){let e=u();m(3),b("transform",e.getDeviceTransform()),m(7),b("width",e.Math.abs(e.acceleration().x/e.maxAcceleration*100),"%"),M("positive",e.acceleration().x>0)("negative",e.acceleration().x<0),m(2),h(e.acceleration().x.toFixed(1)),m(5),b("width",e.Math.abs(e.acceleration().y/e.maxAcceleration*100),"%"),M("positive",e.acceleration().y>0)("negative",e.acceleration().y<0),m(2),h(e.acceleration().y.toFixed(1)),m(5),b("width",e.Math.abs(e.acceleration().z/e.maxAcceleration*100),"%"),M("positive",e.acceleration().z>0)("negative",e.acceleration().z<0),m(2),h(e.acceleration().z.toFixed(1)),m(27),L(e.motionEvents().slice(-5))}}var X=class l{graphCanvas;supported=v(!1);hasPermission=v(!1);acceleration=v({x:0,y:0,z:0});maxAcceleration=20;motionEvents=v([]);dataHistory=[];animationFrameId;ctx;WINDOW_MS=6e4;Math=Math;ngAfterViewInit(){if(this.graphCanvas){let t=this.graphCanvas.nativeElement;this.ctx=t.getContext("2d")||void 0;let e=()=>{let a=t.getBoundingClientRect();t.width=a.width*window.devicePixelRatio,t.height=a.height*window.devicePixelRatio,this.ctx?.scale(window.devicePixelRatio,window.devicePixelRatio)};e(),window.addEventListener("resize",e)}}ngOnInit(){this.checkSupport()}ngOnDestroy(){this.stopListening(),this.animationFrameId&&cancelAnimationFrame(this.animationFrameId)}checkSupport(){this.supported.set("DeviceMotionEvent"in window),this.supported()&&this.requestPermission()}async requestPermission(){try{let t="granted";typeof DeviceMotionEvent.requestPermission=="function"&&(t=await DeviceMotionEvent.requestPermission()),t==="granted"&&(this.hasPermission.set(!0),this.startListening())}catch(t){console.error("Permission denied:",t)}}startListening(){window.addEventListener("devicemotion",this.handleMotion.bind(this)),this.startGraphRendering()}stopListening(){window.removeEventListener("devicemotion",this.handleMotion.bind(this))}handleMotion(t){if(t.accelerationIncludingGravity){let e=t.accelerationIncludingGravity,a={x:e.x||0,y:e.y||0,z:e.z||0};this.acceleration.set(a),this.detectMotionEvents(a),this.addDataPoint(a)}}addDataPoint(t){let e=Date.now(),a=this.totalForce();this.dataHistory.push({timestamp:e,totalForce:a,x:t.x,y:t.y,z:t.z});let d=e-this.WINDOW_MS;this.dataHistory=this.dataHistory.filter(c=>c.timestamp>=d)}startGraphRendering(){let t=()=>{this.drawGraph(),this.animationFrameId=requestAnimationFrame(t)};t()}drawGraph(){if(!this.ctx||!this.graphCanvas)return;let t=this.graphCanvas.nativeElement,e=this.ctx,a=t.getBoundingClientRect(),d=a.width,c=a.height;if(e.clearRect(0,0,d,c),this.dataHistory.length<2)return;let Y=Date.now()-this.WINDOW_MS,E=15,x=-15;this.dataHistory.forEach(r=>{E=Math.max(E,r.totalForce,Math.abs(r.x),Math.abs(r.y),Math.abs(r.z)),x=Math.min(x,-Math.abs(r.x),-Math.abs(r.y),-Math.abs(r.z))});let s=40,B=d-s*2,_=c-s*2;e.strokeStyle="#e0e0e0",e.lineWidth=1,e.beginPath(),e.moveTo(s,s),e.lineTo(s,c-s),e.lineTo(d-s,c-s),e.stroke(),e.strokeStyle="#f5f5f5";for(let r=0;r<=5;r++){let g=s+_/5*r;e.beginPath(),e.moveTo(s,g),e.lineTo(d-s,g),e.stroke()}let Z=r=>{let g=(r-Y)/this.WINDOW_MS;return s+g*B},Q=r=>{let g=(r-x)/(E-x);return c-s-g*_},C=(r,g,y=2)=>{if(this.dataHistory.length<2)return;e.strokeStyle=g,e.lineWidth=y,e.beginPath();let k=!1;this.dataHistory.forEach(D=>{let z=Z(D.timestamp),A=Q(r(D));k?e.lineTo(z,A):(e.moveTo(z,A),k=!0)}),e.stroke()};C(r=>r.x,"#28a745",2),C(r=>r.y,"#007bff",2),C(r=>r.z,"#fd7e14",2),C(r=>r.totalForce,"#764ba2",3),e.fillStyle="#666",e.font="12px sans-serif",e.textAlign="right";for(let r=0;r<=5;r++){let g=x+(E-x)/5*(5-r),y=s+_/5*r;e.fillText(g.toFixed(0),s-10,y+4)}e.textAlign="center",e.fillText("60s",s,c-s+20),e.fillText("0s",d-s,c-s+20)}detectMotionEvents(t){let e=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),a=Date.now(),d="",c="";if(e>15)d="shake",c="Strong shake detected!";else if(e>12)d="sudden",c="Sudden movement";else if(Math.abs(t.x)>8||Math.abs(t.y)>8)d="tilt",c="Device tilted";else return;let f=this.motionEvents();(f.length===0||a-f[f.length-1].timestamp>500)&&this.motionEvents.set([...f,{timestamp:a,text:c,force:e,type:d}])}totalForce(){let t=this.acceleration();return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)}getDeviceTransform(){let t=this.acceleration(),e=Math.max(-30,Math.min(30,t.y*3)),a=Math.max(-30,Math.min(30,-t.x*3)),d=Math.max(-15,Math.min(15,t.z*1.5));return`rotateX(${e}deg) rotateY(${a}deg) rotateZ(${d}deg)`}formatTime(t){return new Date(t).toLocaleTimeString().split(" ")[0]}clearHistory(){this.motionEvents.set([]),this.dataHistory=[]}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=T({type:l,selectors:[["app-accelerometer"]],viewQuery:function(e,a){if(e&1&&V($,5),e&2){let d;q(d=W())&&(a.graphCanvas=d.first)}},decls:6,vars:1,consts:[["graphCanvas",""],[1,"accelerometer"],[1,"error"],[1,"permission-request"],[1,"sensor-container"],[1,"permission-btn",3,"click"],[1,"motion-visualization"],[1,"device-representation"],[1,"device-box"],[1,"acceleration-bars"],[1,"axis-bar","x-axis"],[1,"bar-container"],[1,"bar"],[1,"axis-bar","y-axis"],[1,"axis-bar","z-axis"],[1,"graph-container"],[1,"legend"],[1,"legend-item"],[1,"legend-color","total"],[1,"legend-color","x-axis"],[1,"legend-color","y-axis"],[1,"legend-color","z-axis"],[1,"motion-history"],[1,"activity-log"],[1,"motion-event",3,"class"],[1,"motion-info"],[1,"info-grid"],[1,"info-item"],[1,"controls"],[1,"clear-btn",3,"click"],[1,"motion-event"],[1,"event-time"],[1,"event-text"],[1,"event-force"]],template:function(e,a){e&1&&(i(0,"div",1)(1,"h1"),o(2,"\u{1F4F3} Accelerometer"),n(),F(3,j,3,0,"div",2)(4,U,5,0,"div",3)(5,K,78,23,"div",4),n()),e&2&&(m(3),I(a.supported()?a.hasPermission()?5:4:3))},styles:[".accelerometer[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem}h1[_ngcontent-%COMP%]{color:#333;margin-bottom:2rem;text-align:center}.error[_ngcontent-%COMP%], .permission-request[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:2rem;border-radius:1rem;margin:2rem 0;text-align:center}.permission-btn[_ngcontent-%COMP%]{background:#007bff;color:#fff;border:none;padding:1rem 2rem;border-radius:.5rem;font-size:1rem;cursor:pointer;margin-top:1rem}.sensor-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.motion-visualization[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;padding:2rem;box-shadow:0 4px 20px #0000001a}.device-representation[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;perspective:1000px}.device-box[_ngcontent-%COMP%]{display:inline-block;font-size:4rem;padding:2rem;border-radius:1rem;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;transition:transform .1s ease-out;transform-style:preserve-3d}.acceleration-bars[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.axis-bar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.axis-bar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;min-width:30px;color:#333}.bar-container[_ngcontent-%COMP%]{flex:1;height:30px;background:#e9ecef;border-radius:15px;position:relative;overflow:hidden}.bar[_ngcontent-%COMP%]{height:100%;border-radius:15px;transition:width .1s ease-out;min-width:2px}.x-axis[_ngcontent-%COMP%]   .bar.positive[_ngcontent-%COMP%]{background:linear-gradient(90deg,#28a745,#34ce57)}.x-axis[_ngcontent-%COMP%]   .bar.negative[_ngcontent-%COMP%]{background:linear-gradient(90deg,#dc3545,#e74c3c)}.y-axis[_ngcontent-%COMP%]   .bar.positive[_ngcontent-%COMP%]{background:linear-gradient(90deg,#007bff,#3498db)}.y-axis[_ngcontent-%COMP%]   .bar.negative[_ngcontent-%COMP%]{background:linear-gradient(90deg,#6f42c1,#9b59b6)}.z-axis[_ngcontent-%COMP%]   .bar.positive[_ngcontent-%COMP%]{background:linear-gradient(90deg,#fd7e14,#f39c12)}.z-axis[_ngcontent-%COMP%]   .bar.negative[_ngcontent-%COMP%]{background:linear-gradient(90deg,#20c997,#1abc9c)}.axis-bar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;min-width:80px;text-align:right;color:#333}.graph-container[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;padding:2rem;box-shadow:0 4px 20px #0000001a}.graph-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin-bottom:1rem;text-align:center}canvas[_ngcontent-%COMP%]{width:100%;height:300px;display:block}.legend[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:2rem;margin-top:1rem;flex-wrap:wrap}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.legend-color[_ngcontent-%COMP%]{width:20px;height:3px;border-radius:2px}.legend-color.total[_ngcontent-%COMP%]{background:#764ba2}.legend-color.x-axis[_ngcontent-%COMP%]{background:#28a745}.legend-color.y-axis[_ngcontent-%COMP%]{background:#007bff}.legend-color.z-axis[_ngcontent-%COMP%]{background:#fd7e14}.motion-history[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;padding:2rem;box-shadow:0 4px 20px #0000001a}.motion-history[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin-bottom:1rem}.activity-log[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;max-height:200px;overflow-y:auto}.motion-event[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.7rem;border-radius:.5rem;background:#f8f9fa;border-left:4px solid #dee2e6}.motion-event.shake[_ngcontent-%COMP%]{border-left-color:#dc3545;background:#fff5f5}.motion-event.tilt[_ngcontent-%COMP%]{border-left-color:#007bff;background:#f8f9ff}.motion-event.sudden[_ngcontent-%COMP%]{border-left-color:#ffc107;background:#fffbf0}.event-time[_ngcontent-%COMP%]{font-size:.8rem;color:#666;min-width:60px}.event-text[_ngcontent-%COMP%]{flex:1;margin:0 1rem}.event-force[_ngcontent-%COMP%]{font-weight:700;color:#333;min-width:50px;text-align:right}.motion-info[_ngcontent-%COMP%]{background:#e3f2fd;border-radius:1rem;padding:2rem}.motion-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin-bottom:1rem}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.info-item[_ngcontent-%COMP%]{background:#fff;padding:1rem;border-radius:.5rem;color:#333}.controls[_ngcontent-%COMP%]{text-align:center}.clear-btn[_ngcontent-%COMP%]{background:#6c757d;color:#fff;border:none;padding:1rem 2rem;border-radius:.5rem;font-size:1rem;cursor:pointer}.clear-btn[_ngcontent-%COMP%]:hover{background:#545b62}@media (max-width: 768px){.accelerometer[_ngcontent-%COMP%]{padding:1rem}.info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.device-box[_ngcontent-%COMP%]{font-size:3rem;padding:1.5rem}.axis-bar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:.5rem}.axis-bar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{min-width:auto}.axis-bar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;min-width:auto}.legend[_ngcontent-%COMP%]{gap:1rem}}"]})};export{X as AccelerometerComponent};
